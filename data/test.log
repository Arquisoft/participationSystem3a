/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
ALTER TABLE TUsuarios DROP CONSTRAINT FK_TUsuarios_CIUDADANO_ID
DROP TABLE TUsuarios
DROP TABLE TCiudadanos
CREATE TABLE TUsuarios (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTRASE\u00d1A VARCHAR(255), ISADMIN BOOLEAN, USUARIO VARCHAR(255), CIUDADANO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCategorias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, NAME VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TComentarios (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), FECHA DATE, SUGERENCIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVotosComentarios (VOTOAFAVOR BOOLEAN, COMMENT_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (COMMENT_ID, USER_ID))
CREATE TABLE TSugerencias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), ESTADO VARCHAR(255), FECHA DATE, VOTOSNEGATIVOS INTEGER, VOTOSPOSITIVOS INTEGER, CATEGORIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCiudadanos (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, APELLIDOS VARCHAR(255), DNI VARCHAR(255), EMAIL VARCHAR(255), FECHANACIMIENTO DATE, NACIONALIDAD VARCHAR(255), NOMBRE VARCHAR(255), RESIDENCIA VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TUsuarios ADD CONSTRAINT FK_TUsuarios_CIUDADANO_ID FOREIGN KEY (CIUDADANO_ID) REFERENCES TCiudadanos (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_SUGERENCIA_ID FOREIGN KEY (SUGERENCIA_ID) REFERENCES TSugerencias (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_COMMENT_ID FOREIGN KEY (COMMENT_ID) REFERENCES TComentarios (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_CATEGORIA_ID FOREIGN KEY (CATEGORIA_ID) REFERENCES TCategorias (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
ALTER TABLE TUsuarios DROP CONSTRAINT FK_TUsuarios_CIUDADANO_ID
ALTER TABLE TComentarios DROP CONSTRAINT FK_TComentarios_SUGERENCIA_ID
ALTER TABLE TComentarios DROP CONSTRAINT FK_TComentarios_USER_ID
ALTER TABLE TVotosComentarios DROP CONSTRAINT FK_TVotosComentarios_USER_ID
ALTER TABLE TVotosComentarios DROP CONSTRAINT FK_TVotosComentarios_COMMENT_ID
ALTER TABLE TSugerencias DROP CONSTRAINT FK_TSugerencias_CATEGORIA_ID
ALTER TABLE TSugerencias DROP CONSTRAINT FK_TSugerencias_USER_ID
DROP TABLE TUsuarios
DROP TABLE TCategorias
DROP TABLE TComentarios
DROP TABLE TVotosComentarios
DROP TABLE TSugerencias
DROP TABLE TCiudadanos
CREATE TABLE TUsuarios (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTRASE\u00d1A VARCHAR(255), ISADMIN BOOLEAN, USUARIO VARCHAR(255), CIUDADANO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCategorias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, NAME VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TComentarios (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), FECHA DATE, SUGERENCIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVotosComentarios (VOTOAFAVOR BOOLEAN, COMMENT_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (COMMENT_ID, USER_ID))
CREATE TABLE TSugerencias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), ESTADO VARCHAR(255), FECHA DATE, CATEGORIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVotosSugerencias (VOTOAFAVOR BOOLEAN, SUGGESTION_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (SUGGESTION_ID, USER_ID))
CREATE TABLE TCiudadanos (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, APELLIDOS VARCHAR(255), DNI VARCHAR(255), EMAIL VARCHAR(255), FECHANACIMIENTO DATE, NACIONALIDAD VARCHAR(255), NOMBRE VARCHAR(255), RESIDENCIA VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TUsuarios ADD CONSTRAINT FK_TUsuarios_CIUDADANO_ID FOREIGN KEY (CIUDADANO_ID) REFERENCES TCiudadanos (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_SUGERENCIA_ID FOREIGN KEY (SUGERENCIA_ID) REFERENCES TSugerencias (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_COMMENT_ID FOREIGN KEY (COMMENT_ID) REFERENCES TComentarios (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_CATEGORIA_ID FOREIGN KEY (CATEGORIA_ID) REFERENCES TCategorias (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
ALTER TABLE TVotosSugerencias ADD CONSTRAINT FK_TVotosSugerencias_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSugerencias (ID)
ALTER TABLE TVotosSugerencias ADD CONSTRAINT FK_TVotosSugerencias_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsuarios (ID)
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
ALTER TABLE TComentarios DROP CONSTRAINT FK_TComentarios_SUGERENCIA_ID
ALTER TABLE TComentarios DROP CONSTRAINT FK_TComentarios_USER_ID
ALTER TABLE TVotosComentarios DROP CONSTRAINT FK_TVotosComentarios_USER_ID
ALTER TABLE TVotosComentarios DROP CONSTRAINT FK_TVotosComentarios_COMMENT_ID
ALTER TABLE TSugerencias DROP CONSTRAINT FK_TSugerencias_CATEGORIA_ID
ALTER TABLE TSugerencias DROP CONSTRAINT FK_TSugerencias_USER_ID
ALTER TABLE TVotosSugerencias DROP CONSTRAINT FK_TVotosSugerencias_SUGGESTION_ID
ALTER TABLE TVotosSugerencias DROP CONSTRAINT FK_TVotosSugerencias_USER_ID
DROP TABLE TCategorias
DROP TABLE TComentarios
DROP TABLE TVotosComentarios
DROP TABLE TSugerencias
DROP TABLE TVotosSugerencias
CREATE TABLE TUsers (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, ISADMIN BOOLEAN, PASSWORD VARCHAR(255), USERNAME VARCHAR(255), CITIZEN_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCategorias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, NAME VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TComentarios (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), FECHA DATE, SUGERENCIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVotosComentarios (VOTOAFAVOR BOOLEAN, COMMENT_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (COMMENT_ID, USER_ID))
CREATE TABLE TSugerencias (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENIDO VARCHAR(255), ESTADO VARCHAR(255), FECHA DATE, CATEGORIA_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVotosSugerencias (VOTOAFAVOR BOOLEAN, SUGGESTION_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (SUGGESTION_ID, USER_ID))
CREATE TABLE TCitizens (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), FECHANACIMIENTO DATE, NACIONALIDAD VARCHAR(255), NAME VARCHAR(255), RESIDENCIA VARCHAR(255), SURNAME VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TUsers ADD CONSTRAINT FK_TUsers_CITIZEN_ID FOREIGN KEY (CITIZEN_ID) REFERENCES TCitizens (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_SUGERENCIA_ID FOREIGN KEY (SUGERENCIA_ID) REFERENCES TSugerencias (ID)
ALTER TABLE TComentarios ADD CONSTRAINT FK_TComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TVotosComentarios ADD CONSTRAINT FK_TVotosComentarios_COMMENT_ID FOREIGN KEY (COMMENT_ID) REFERENCES TComentarios (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_CATEGORIA_ID FOREIGN KEY (CATEGORIA_ID) REFERENCES TCategorias (ID)
ALTER TABLE TSugerencias ADD CONSTRAINT FK_TSugerencias_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TVotosSugerencias ADD CONSTRAINT FK_TVotosSugerencias_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSugerencias (ID)
ALTER TABLE TVotosSugerencias ADD CONSTRAINT FK_TVotosSugerencias_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
ALTER TABLE TUsers DROP CONSTRAINT FK_TUsers_CITIZEN_ID
DROP TABLE TCitizens
CREATE TABLE TComments (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENTS VARCHAR(255), CREATIONDATE DATE, SUGGESTION_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCommentsVotes (VOTE VARCHAR(255), COMMENT_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (COMMENT_ID, USER_ID))
CREATE TABLE TSuggestions (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENTS VARCHAR(255), CREATIONDATE DATE, STATUS VARCHAR(255), CATEGORY_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSuggestionsVotes (VOTE VARCHAR(255), SUGGESTION_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (SUGGESTION_ID, USER_ID))
CREATE TABLE TCitizens (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, BIRTHDAY DATE, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), NATIONALITY VARCHAR(255), RESIDENCE VARCHAR(255), SURNAME VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TUsers ADD CONSTRAINT FK_TUsers_CITIZEN_ID FOREIGN KEY (CITIZEN_ID) REFERENCES TCitizens (ID)
ALTER TABLE TComments ADD CONSTRAINT FK_TComments_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TComments ADD CONSTRAINT FK_TComments_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSuggestions (ID)
ALTER TABLE TCommentsVotes ADD CONSTRAINT FK_TCommentsVotes_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TCommentsVotes ADD CONSTRAINT FK_TCommentsVotes_COMMENT_ID FOREIGN KEY (COMMENT_ID) REFERENCES TComments (ID)
ALTER TABLE TSuggestions ADD CONSTRAINT FK_TSuggestions_CATEGORY_ID FOREIGN KEY (CATEGORY_ID) REFERENCES TCategorias (ID)
ALTER TABLE TSuggestions ADD CONSTRAINT FK_TSuggestions_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TSuggestionsVotes ADD CONSTRAINT FK_TSuggestionsVotes_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSuggestions (ID)
ALTER TABLE TSuggestionsVotes ADD CONSTRAINT FK_TSuggestionsVotes_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
ALTER TABLE TUsers DROP CONSTRAINT FK_TUsers_CITIZEN_ID
ALTER TABLE TComments DROP CONSTRAINT FK_TComments_USER_ID
ALTER TABLE TComments DROP CONSTRAINT FK_TComments_SUGGESTION_ID
ALTER TABLE TCommentsVotes DROP CONSTRAINT FK_TCommentsVotes_USER_ID
ALTER TABLE TCommentsVotes DROP CONSTRAINT FK_TCommentsVotes_COMMENT_ID
ALTER TABLE TSuggestions DROP CONSTRAINT FK_TSuggestions_CATEGORY_ID
ALTER TABLE TSuggestions DROP CONSTRAINT FK_TSuggestions_USER_ID
ALTER TABLE TSuggestionsVotes DROP CONSTRAINT FK_TSuggestionsVotes_SUGGESTION_ID
ALTER TABLE TSuggestionsVotes DROP CONSTRAINT FK_TSuggestionsVotes_USER_ID
DROP TABLE TComments
DROP TABLE TCommentsVotes
DROP TABLE TSuggestions
DROP TABLE TSuggestionsVotes
DROP TABLE TCitizens
CREATE TABLE TRestringedWords (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, WORD VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCategories (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, NAME VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TComments (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENTS VARCHAR(255), CREATIONDATE DATE, SUGGESTION_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCommentsVotes (VOTE VARCHAR(255), COMMENT_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (COMMENT_ID, USER_ID))
CREATE TABLE TSuggestions (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CONTENTS VARCHAR(255), CREATIONDATE DATE, FINALIZATIONDATE DATE, STATUS VARCHAR(255), CATEGORY_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSuggestionsVotes (VOTE VARCHAR(255), SUGGESTION_ID BIGINT NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (SUGGESTION_ID, USER_ID))
CREATE TABLE TCitizens (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, BIRTHDAY DATE, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), NATIONALITY VARCHAR(255), RESIDENCE VARCHAR(255), SURNAME VARCHAR(255), PRIMARY KEY (ID))
ALTER TABLE TUsers ADD CONSTRAINT FK_TUsers_CITIZEN_ID FOREIGN KEY (CITIZEN_ID) REFERENCES TCitizens (ID)
ALTER TABLE TComments ADD CONSTRAINT FK_TComments_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TComments ADD CONSTRAINT FK_TComments_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSuggestions (ID)
ALTER TABLE TCommentsVotes ADD CONSTRAINT FK_TCommentsVotes_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TCommentsVotes ADD CONSTRAINT FK_TCommentsVotes_COMMENT_ID FOREIGN KEY (COMMENT_ID) REFERENCES TComments (ID)
ALTER TABLE TSuggestions ADD CONSTRAINT FK_TSuggestions_CATEGORY_ID FOREIGN KEY (CATEGORY_ID) REFERENCES TCategories (ID)
ALTER TABLE TSuggestions ADD CONSTRAINT FK_TSuggestions_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
ALTER TABLE TSuggestionsVotes ADD CONSTRAINT FK_TSuggestionsVotes_SUGGESTION_ID FOREIGN KEY (SUGGESTION_ID) REFERENCES TSuggestions (ID)
ALTER TABLE TSuggestionsVotes ADD CONSTRAINT FK_TSuggestionsVotes_USER_ID FOREIGN KEY (USER_ID) REFERENCES TUsers (ID)
DISCONNECT
